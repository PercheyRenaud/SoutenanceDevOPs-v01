---
  ###installation FS
- name: display setup
  debug:
    var: ansible_mounts
    verbosity: 1
  tags: filesystem

- name: Check if {{ mysql_data_dir }} is already a mountpoint
  set_fact:
    mysql_data_dir_mounted: "{% for mounts in ansible_mounts %}{% if mounts.mount == mysql_data_dir %}true{% endif %}{% endfor %}"
  tags: filesystem

- name: display setup
  debug:
    var: mysql_data_dir_mounted
    verbosity: 1
  tags: FS

- name: install xfs tools
  apt:
    name: xfsprogs
    state: present
  tags: filesystem

- name: Create a xfs filesystem on {{ log_disk }} to store system logs
  filesystem:
    fstype: xfs
    dev: "{{ log_disk }}"
  tags: filesystem

- name: mount {{ log_disk }} on /var/log
  mount:
    src: "{{ log_disk }}"
    path: /var/log
    state: mounted
    fstype: xfs
  tags: filesystem

- name: Create a xfs filesystem on {{ data_disk }} to store MySQL data
  filesystem:
    fstype: xfs
    dev: "{{ data_disk }}"# tasks file for wp.creation_FS
  tags: filesystem
